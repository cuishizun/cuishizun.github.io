$.fn.sider=function(q){function d(b,c,d){if(b){var h=f/(a.max-a.min),e=b*h,e=e>f?f:0>e?0:e;d?e-=h*a.min:b+=a.min;b=b>a.max?a.max:b<a.min?a.min:b;k.val(b);l.css({left:e})}c&&g.hide();a.callback&&q.callback(m,b,c)}var a={step:1,min:0,max:100,quick:[0,5,10,15,30,40,60,80],name:"size",value:"",callback:!1};$.extend(a,q);$(this).html('<input type="text" name="'+a.name+'" value="'+a.value+'" class="form-control"><div class="popcontent"><ul></ul><div class="sider"><div class="sider-btn"></div></div></div>');
var n,r,m=$(this),k=m.children("input"),g=m.children(".popcontent"),p=g.children(".sider"),c=g.children("ul"),l=p.children(".sider-btn"),f,u=(a.max-a.min)/a.step,t;m.click(function(a){a.stopPropagation()});k.focus(function(b){g.show();b="";var h=40<c.width()/a.quick.length?parseInt(c.width()/a.quick.length)/c.width()*100:100/parseInt(c.width()/40);for(i in a.quick)b+="<li data-num='"+a.quick[i]+"' style='width:"+h+"%'></li>";c.html($(b));f=p.width()-l.width();t=f/u;c.children(".active").removeClass("active");
c.children("li[data-num='"+k.val()+"']").addClass("active");d(k.val(),!1,!0)});c.on("click","li",function(){d($(this).attr("data-num"),!0)});l.on("mousedown",function(a){n=!0;var b=l.offset(),c=p.offset();r=parseInt(b.left)+(a.pageX-parseInt(b.left))+(c.left-b.left)});$(document).mousemove(function(b){n&&d(parseInt((b.pageX-r)/t)*a.step)});$(document).on("mouseup",function(){n&&d(void 0,!0);n=!1});$(document).click(function(){g.hide()})};